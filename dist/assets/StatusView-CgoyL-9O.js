var C=(I,w,c)=>new Promise((_,u)=>{var b=l=>{try{m(c.next(l))}catch(i){u(i)}},k=l=>{try{m(c.throw(l))}catch(i){u(i)}},m=l=>l.done?_(l.value):Promise.resolve(l.value).then(b,k);m((c=c.apply(I,w)).next())});import{d as N,r as g,j,o as G,m as f,c as B,a as o,b as a,g as S,w as s,ao as J,ap as Y,i as r,e as n,f as v,n as E,t as A}from"./index-CgJ4W8_D.js";import{g as $,s as R,b as F}from"./status-BfqA-n-h.js";import{r as H}from"./constants-B3sxij0k.js";import{I as O}from"./index-DnDKaFbj.js";import"//at.alicdn.com/t/c/font_4565805_mtkshfnyzag.js";const Q={class:"flex flex-col w-9/12 mx-auto mt-10 gap-4"},X={class:"absolute top-0 right-0 mt-4 mr-4 flex items-center"},W=o("span",{class:"ml-2"},"退出",-1),Z=o("div",{class:"text-lg border border-gray border-solid rounded-2xl pa-30px max-w-1000px mx-auto lh-relaxed"},[r(" 选择状态为可用的账号使用，当下方使用账号次数达到上限时，这时候你需要点击换号，选择一个可用的账号使用。 要想长期保留记录，请在此账号下续费，不然记录会丢失。 如出现报错或无回复，请尝试刷新页面或退出账号重新登录，开始新对话即可使用。 "),o("li",null,[r("普通账户只能使用"),o("strong",{style:{"font-weight":"bold"}},"普通账号 "),r("的Sonnet3.5模型")]),o("li",null,[r(" plus账户还能使用plus账号的"),o("strong",{style:{"font-weight":"bold"}}," Opus 和Sonnet3.5模型 "),r(" ， 并且有"),o("strong",{style:{"font-weight":"bold"}},"更大"),r(" 的配额。 ")])],-1),D={class:"mx-auto w-9/10 mt-20"},ee={key:0,style:{"text-align":"center",padding:"20px","font-size":"16px",color:"#999"}},te=o("p",{style:{"margin-top":"10px"}},"加载中账号中....",-1),oe={class:"message-ellipsis"},ae='版本跟新了， 目前官网1：1能实现对话隔离，但是每次有三小时时限， 并且每次进入都将增加15次使用次数， 可以查看 <a href="https://w0zqg6m28ev.feishu.cn/docx/XiHfdcqq4oMeVGxBfPRcuxlUnBb?from=from_copylink" target="_blank">这个文档</a> 查看具体使用方法。',U="0.5",_e=N({__name:"StatusView",setup(I){const w=()=>{localStorage.removeItem("SJ_API_KEY"),window.location.href="/chat"},c=g([]),_=$("api_key")||localStorage.getItem("SJ_API_KEY"),u=g(!0),b=g(!1),k=j(()=>e=>e.is_session_login?"#87d068":e.type==="normal"?"#2db7f5":e.usage<10&&e.status!=="cd"?"#ffff00":"#f50"),m=g(0);g(0);const l=e=>C(this,null,function*(){if(e.meta_data&&"official_login"in e.meta_data&&e.meta_data.official_login){window.open("https://claude35.liuli.585dg.com","_blank");return}if(e.is_session_login){const y={client_idx:e.idx,client_type:e.type},h=yield F("/claude/obtain_reverse_official_login_router","POST",{"Content-Type":"application/json",Authorization:_},{},y);if(h.valid){f.info("进入官网1：1登录页面");const p=h.data.login_url,x=`${H}${p}`;window.open(x,"_blank")}else{const p=h.message;f.error(p)}}else{const d=window.location.protocol+"//"+window.location.host+"/claude/chat"+"?api_key="+_+"&client_idx="+e.idx+"&client_type="+e.type;window.location.href=d}}),i=g(!1),T=()=>{localStorage.getItem("announcementVersion")!==U&&(i.value=!0,localStorage.setItem("announcementVersion",U))},z=()=>{i.value=!1};return G(()=>C(this,null,function*(){_||(f.error("登录无效，请返回重新登录"),window.location.href="/chat");try{u.value=!0;const e=yield R("/api_key/get_information/"+_,"GET"),y=e.is_key_valid;m.value=e.usage_limit,y?f.info("账号过期时间："+e.expire_time):(localStorage.removeItem("SJ_API_KEY"),f.error("账号密钥以及过期或失效，请返回重新登录"),window.location.href="/chat");const d=yield R("/clients_status","GET");console.log(d,"res"),c.value=d}catch(e){console.error("Error loading data:",e),f.error("加载数据失败，请重试")}finally{u.value=!1}T()})),(e,y)=>{const d=n("a-alert"),h=n("a-spin"),p=n("a-tag"),x=n("a-statistic"),V=n("a-col"),L=n("a-row"),P=n("a-tooltip"),q=n("a-card"),M=n("a-list-item"),K=n("a-list");return v(),B("div",{class:"w-full absolute",style:Y({backgroundImage:b.value?"linear-gradient(-20deg, #E0C3FC 0%, #8EC5FC 100%)":"linear-gradient(-20deg, #e9defa 0%, #fbfcdb 100%)"})},[o("div",Q,[o("div",X,[o("div",{class:"flex justify-center cursor-pointer items-center color-gray-500 hover:color-gray-950",onClick:w},[a(O,{icon:"icon-switch",style:{width:"20px",height:"20px"}}),W])]),i.value?(v(),S(d,{key:0,message:"重要公告",type:"info","show-icon":"",closable:"",onClose:z,style:{"margin-bottom":"20px"}},{description:s(()=>[o("div",{innerHTML:ae})]),_:1})):J("",!0),Z]),o("div",D,[u.value?(v(),B("div",ee,[a(h,{size:"large"}),te])):(v(),S(K,{key:1,grid:{gutter:1,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},"data-source":[{id:"additional",type:"claude官网",meta_data:{official_login:!0},message:"Claude官网(联系对接人获取秘钥)"},...c.value]},{renderItem:s(({item:t})=>[(v(),S(M,{key:t.idx},{default:s(()=>[a(q,{title:t.id,onClick:se=>l(t),class:E({"cursor-pointer":!0,"card-plus":t.type==="plus","card-normal":t.type==="normal","card-cd":t.status==="cd","card-noncd":t.status!=="cd"})},{extra:s(()=>[a(p,{color:k.value(t),visible:t.is_session_login},{default:s(()=>[r("官网1:1")]),_:2},1032,["color","visible"]),a(p,{color:t.type==="normal"?"#2db7f5":"#f50",class:E({"tag-plus":t.type==="plus","tag-normal":t.type==="normal","tag-cd":t.status==="cd","tag-noncd":t.status!=="cd"})},{default:s(()=>[r(A(t.type),1)]),_:2},1032,["color","class"])]),default:s(()=>[a(L,{gutter:16},{default:s(()=>[a(V,{span:12},{default:s(()=>[a(x,{title:"使用次数",value:t.usage,"value-style":{color:"#3f8600"}},null,8,["value"])]),_:2},1024),a(V,{span:12},{default:s(()=>[a(x,{title:"状态",value:t.status==="cd"?"冷却":"可用","value-style":{color:t.status==="cd"?"#cf1322":"#3f8600"}},null,8,["value","value-style"])]),_:2},1024)]),_:2},1024),a(P,{title:t.message},{default:s(()=>[o("div",oe,A(t.message),1)]),_:2},1032,["title"])]),_:2},1032,["title","onClick","class"])]),_:2},1024))]),_:1},8,["data-source"]))])],4)}}});export{_e as default};
