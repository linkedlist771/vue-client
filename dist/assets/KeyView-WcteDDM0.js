var y=(x,n,s)=>new Promise((A,o)=>{var w=t=>{try{i(s.next(t))}catch(r){o(r)}},d=t=>{try{i(s.throw(t))}catch(r){o(r)}},i=t=>t.done?A(t.value):Promise.resolve(t.value).then(w,d);i((s=s.apply(x,n)).next())});import{d as F,r as g,i as K,j as v,k as Q,f as Z,w as m,e as I,o as U,a as c,u as b,t as Y,b as M,h,m as u,l as S}from"./index-CA9x9sQ-.js";import{b as j,r as z}from"./constants-B3sxij0k.js";import"//at.alicdn.com/t/c/font_4565805_mtkshfnyzag.js";const J="data:image/png;base64,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",G={class:"w-80px justify-center flex ma-auto"},O=["src"],R={class:"font-size-16px font-500 mb-10px mt-40px"},N={class:"flex mt-20px justify-end"},L={class:"mt-10px text-center"},H=F({__name:"KeyView",setup(x){const n=g(!1),s=g(""),A=g(!1),o=g(!1),w=K(()=>o.value?"登录SessionKey":"登录秘钥"),d=K(()=>o.value?"输入SessionKey(sk-ant-xxxx)":"输入登录秘钥(sk-xxxxxx)");function i(){o.value=!o.value,s.value=""}function t(){const e=s.value,l=`${j}/api/v1/api_key/validate_key/${e}`;e!=""&&(n.value=!0,fetch(l,{method:"GET",headers:{accept:"application/json"}}).then(a=>a.json()).then(a=>{if(a.is_valid){u.success("登录成功"),localStorage.setItem("SJ_API_KEY",e);const C=window.location.protocol+"//"+window.location.host+"/claude/status?api_key="+e;S(()=>{window.location.href=C})}else u.error("该密码已过期或不存在，请重新购买。"),localStorage.removeItem("SJ_API_KEY")}).catch(a=>{u.error("登录发生错误"),localStorage.removeItem("SJ_API_KEY")}).finally(()=>{n.value=!1}))}function r(e){return e.startsWith("sk-ant-")?!0:(u.error("sessionKey格式错误, sessionKey格式为sk-ant-xxxx"),!1)}function E(){if(!r(s.value))return;const e=s.value;if(e==""){u.error("请输入sessionKey");return}const l=`${z}/login_token?session_key=${e}`;window.location.href=l}function p(){o.value?E():t()}const B=g(!1);return v(()=>y(this,null,function*(){const e=localStorage.getItem("SJ_API_KEY");if(e){const a=window.location.protocol+"//"+window.location.host+"/claude/status?api_key="+e;B.value=!0,window.location.href=a}})),Q(()=>{A.value=!B.value}),(e,l)=>{const a=I("a-input"),f=I("a-button"),C=I("a-modal");return U(),Z(C,{open:A.value,"onUpdate:open":l[1]||(l[1]=k=>A.value=k),title:"",footer:null,centered:"",closable:!1,keyboard:!1,maskClosable:!1},{default:m(()=>[c("div",G,[c("img",{class:"max-w-full",src:b(J),alt:""},null,8,O)]),c("div",R,Y(w.value),1),M(a,{autocomplete:"on",onPressEnter:p,value:s.value,"onUpdate:value":l[0]||(l[0]=k=>s.value=k),size:"large",placeholder:d.value},null,8,["value","placeholder"]),c("div",N,[M(f,{disabled:n.value,onClick:p,type:"default",size:"large",class:"w-100px",style:{"background-image":"linear-gradient(-20deg, #e9defa 0%, #fbfcdb 100%)"}},{default:m(()=>[h("登录")]),_:1},8,["disabled"])]),c("div",L,[M(f,{type:"link",onClick:i},{default:m(()=>[h(Y(o.value?"使用秘钥登录":"使用sessionKey登录"),1)]),_:1})])]),_:1},8,["open"])}}});export{H as default};
